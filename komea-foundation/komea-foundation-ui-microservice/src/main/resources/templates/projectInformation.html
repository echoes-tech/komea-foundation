<!--/* Project Information panel */-->
<div  th:fragment="projectInformationPanel">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Project Information</h3>
		</div>


<div th:with="features=${@projectInformationManager.getFeatures(projectData.project)}" th:remove="tag">
<div th:with="releases=${@projectInformationManager.getVersions(projectData.project)}" th:remove="tag">
		<div class="panel-body">
				
			<div class="project-properties" >
				<p>
					<strong>Name:</strong> 
					<label th:text="${projectData.project.name}">test</label>
				</p>
				<p>
					<strong>Owner:</strong>
					<label th:text="${#strings.isEmpty(projectData.user.firstName) or #strings.isEmpty(projectData.user.lastName) ? projectData.user.login : projectData.user.firstName +' '+ projectData.user.lastName}">User</label>
				</p>
			</div>


			<!-- ul class="project-properties" style="list-style-type: none">
				<li>
					<strong>Name:</strong> 
					<label th:text="${projectData.project.name}">test</label>
				</li>
				<li>
					<strong>Owner:</strong>
					<label th:text="${#strings.isEmpty(projectData.user.firstName) or #strings.isEmpty(projectData.user.lastName) ? projectData.user.login : projectData.user.firstName +' '+ projectData.user.lastName}">User</label>
				</li>
			</ul -->

			<table class="table table-striped table-hover tableRowEllipsis" th:if="${not #lists.isEmpty(features)}">
				<thead>
					<tr>
						<th>Feature</th> 
						<!-- th>Assigé à</th -->
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="feature : ${features}">
						<td th:text="'#' + ${feature.getId()} + ' - ' + ${feature.getSubject()}"></td>
						<!--  td th:text="${feature.getAssignee()}"></td -->
						<td>

							<div th:if="${feature.getStatus() == T(fr.echoes.labs.ksf.cc.extensions.services.project.TicketStatus).NEW}" class="pull-right">
							<form th:attr="action=@{/ui/projects/features/new}"

								class="form-horizontal" method="post"
								role="form" data-toggle="validator">

								<input name="projectKey" type="hidden" th:value="${projectData.project.key}" />
								<input name="featureId" type="hidden" th:value="${feature.getId()}" />
								<input name="featureSubject" type="hidden" th:value="${feature.getSubject()}" />
								<button onclick="return confirm('Start feature ?')" class="glyphicon glyphicon-play" type="submit" style="color:DarkGreen"></button>
							</form>
							</div>

							<div th:if="${feature.getStatus() == T(fr.echoes.labs.ksf.cc.extensions.services.project.TicketStatus).CREATED}" class="pull-right">
							<form th:attr="action=@{/ui/projects/features/finish}"

								class="form-horizontal" method="post"
								role="form" data-toggle="validator">

								<input name="projectKey" type="hidden" th:value="${projectData.project.key}" />
								<input name="featureId" type="hidden" th:value="${feature.getId()}" />
								<input name="featureSubject" type="hidden" th:value="${feature.getSubject()}" />
								<button onclick="return confirm('Finish feature ?')" class="glyphicon glyphicon-stop" type="submit" style="color:DarkRed"></button>
								<button class="glyphicon glyphicon-info-sign" data-dismiss="modal" type="button" data-toggle="modal" data-target="#validationErrorsModal"></button>
							</form>
							</div>							
						</td>
					</tr>
				</tbody>
			</table>

			
    		<table class="table table-striped table-hover tableRowEllipsis" th:if="${not #lists.isEmpty(releases)}">
				<thead>
					<tr>
						<th>Release</th> 
						
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="release : ${releases}">
						<!-- td th:text="${release.getId()}"></td -->
						<td th:text="${release.getName()}"></td>
						<td>
						
							<div th:if="${release.getStatus() == T(fr.echoes.labs.ksf.cc.extensions.services.project.TicketStatus).NEW}" class="pull-right">
							<form th:attr="action=@{/ui/projects/releases/new}"
								class="form-horizontal" method="post"
								role="form" data-toggle="validator">

								<input name="projectKey" type="hidden" th:value="${projectData.project.key}" />
								<input name="releaseId" type="hidden" th:value="${release.getId()}" />
								<input name="releaseVersion" type="hidden" th:value="${release.getName()}" />
								<button onclick="return confirm('Start release ?')" class="glyphicon glyphicon-play" type="submit" style="color:DarkGreen"></button>
							</form>
							</div>

							<div th:if="${release.getStatus() == T(fr.echoes.labs.ksf.cc.extensions.services.project.TicketStatus).CREATED}" class="pull-right">
							<form th:attr="action=@{/ui/projects/releases/finish}"
								class="form-horizontal" method="post"
								role="form" data-toggle="validator">

								<input name="projectKey" type="hidden" th:value="${projectData.project.key}" />
								<input name="releaseId" type="hidden" th:value="${release.getId()}" />
								<input name="releaseVersion" type="hidden" th:value="${release.getName()}" />
								<button onclick="return confirm('Finish release ?')" class="glyphicon glyphicon-stop" type="submit" style="color:DarkRed"></button>
								<button class="glyphicon glyphicon-info-sign" data-dismiss="modal" type="button" data-toggle="modal" data-target="#featureInformation"></button>
							</form>
							</div>							
						</td>
					</tr>
				</tbody>
			</table>			


<div id="featureInformation" class="modal fade in" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Informations</h4>
      </div>
      <div class="modal-body">
        <p></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<div th:if="${validationErrors != null}" th:remove="tag">
<div id="validationErrorsModal" class="modal fade in" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"></h4>
      </div>
      <div class="modal-body">
  		<ul class="list-group">
  			<li class="list-group-item" th:each="validationError : ${validationErrors}" th:text="${validationError.getMessage()}"></li>
  		</ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
</div> <!--/* End if validationErrors */-->
	
				
		</div>


</div>
</div>
</div>
</div>


